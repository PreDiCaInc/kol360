(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{7607:function(e,n,s){Promise.resolve().then(s.bind(s,9870))},9870:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return g}});var i=s(6517),t=s(6557),l=s(4090),r=s(1737),c=s(6944),a=s(1931),d=s(1015),o=s(8798),u=s(8437),h=s(4733),x=s(1347),j=s(7229),m=s(7202),p=s(3887);function v(e){let{open:n,onOpenChange:s,clientId:r}=e,{data:a}=(0,l.m8)(r||""),d=(0,l.WN)(),v=(0,l.eU)(),y=!!r,f=(0,o.cI)({resolver:(0,u.F)(h.createClientSchema),defaultValues:{name:"",type:"FULL",primaryColor:"#0066CC"}});async function C(e){try{y?await v.mutateAsync({id:r,data:e}):await d.mutateAsync(e),s(!1),f.reset()}catch(e){console.error("Failed to save client:",e)}}return(0,t.useEffect)(()=>{a&&f.reset({name:a.name,type:a.type,primaryColor:a.primaryColor,logoUrl:a.logoUrl})},[a,f]),(0,i.jsx)(x.Vq,{open:n,onOpenChange:s,children:(0,i.jsxs)(x.cZ,{children:[(0,i.jsx)(x.fK,{children:(0,i.jsx)(x.$N,{children:y?"Edit Client":"Add Client"})}),(0,i.jsx)(j.l0,{...f,children:(0,i.jsxs)("form",{onSubmit:f.handleSubmit(C),className:"space-y-4",children:[(0,i.jsx)(j.Wi,{control:f.control,name:"name",render:e=>{let{field:n}=e;return(0,i.jsxs)(j.xJ,{children:[(0,i.jsx)(j.lX,{children:"Client Name"}),(0,i.jsx)(j.NI,{children:(0,i.jsx)(m.I,{...n,placeholder:"Acme Pharma"})}),(0,i.jsx)(j.zG,{})]})}}),(0,i.jsx)(j.Wi,{control:f.control,name:"type",render:e=>{let{field:n}=e;return(0,i.jsxs)(j.xJ,{children:[(0,i.jsx)(j.lX,{children:"Client Type"}),(0,i.jsxs)(p.Ph,{onValueChange:n.onChange,value:n.value,children:[(0,i.jsx)(j.NI,{children:(0,i.jsx)(p.i4,{children:(0,i.jsx)(p.ki,{})})}),(0,i.jsxs)(p.Bw,{children:[(0,i.jsx)(p.Ql,{value:"FULL",children:"Full (Surveys + Data)"}),(0,i.jsx)(p.Ql,{value:"LITE",children:"Lite (Data Only)"})]})]}),(0,i.jsx)(j.zG,{})]})}}),(0,i.jsx)(j.Wi,{control:f.control,name:"primaryColor",render:e=>{let{field:n}=e;return(0,i.jsxs)(j.xJ,{children:[(0,i.jsx)(j.lX,{children:"Brand Color"}),(0,i.jsx)(j.NI,{children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(m.I,{type:"color",value:n.value,onChange:n.onChange,className:"w-16 h-10 p-1"}),(0,i.jsx)(m.I,{value:n.value,onChange:n.onChange,placeholder:"#0066CC"})]})}),(0,i.jsx)(j.zG,{})]})}}),(0,i.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,i.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,i.jsx)(c.z,{type:"submit",disabled:d.isPending||v.isPending,children:y?"Update":"Create"})]})]})})]})})}var y=s(4113),f=s(3933);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,f.Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),N=(0,f.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function g(){let[e,n]=(0,t.useState)(!1),[s,o]=(0,t.useState)(null),{data:u,isLoading:h}=(0,l.av)(),x=(0,l.Ln)(),j=(null==u?void 0:u.items)||[];return(0,i.jsx)(r.Y,{allowedRoles:["PLATFORM_ADMIN"],children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"Clients"}),(0,i.jsxs)(c.z,{onClick:()=>n(!0),children:[(0,i.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Add Client"]})]}),h?(0,i.jsx)("div",{children:"Loading..."}):(0,i.jsxs)(d.iA,{children:[(0,i.jsx)(d.xD,{children:(0,i.jsxs)(d.SC,{children:[(0,i.jsx)(d.ss,{children:"Name"}),(0,i.jsx)(d.ss,{children:"Type"}),(0,i.jsx)(d.ss,{children:"Users"}),(0,i.jsx)(d.ss,{children:"Campaigns"}),(0,i.jsx)(d.ss,{children:"Status"}),(0,i.jsx)(d.ss,{className:"w-24",children:"Actions"})]})}),(0,i.jsx)(d.RM,{children:j.map(e=>{var n,s;return(0,i.jsxs)(d.SC,{children:[(0,i.jsx)(d.pj,{className:"font-medium",children:e.name}),(0,i.jsx)(d.pj,{children:(0,i.jsx)(a.C,{variant:"FULL"===e.type?"default":"secondary",children:e.type})}),(0,i.jsx)(d.pj,{children:(null===(n=e._count)||void 0===n?void 0:n.users)||0}),(0,i.jsx)(d.pj,{children:(null===(s=e._count)||void 0===s?void 0:s.campaigns)||0}),(0,i.jsx)(d.pj,{children:(0,i.jsx)(a.C,{variant:e.isActive?"default":"destructive",children:e.isActive?"Active":"Inactive"})}),(0,i.jsx)(d.pj,{children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(c.z,{variant:"ghost",size:"icon",onClick:()=>o(e.id),children:(0,i.jsx)(C,{className:"w-4 h-4"})}),(0,i.jsx)(c.z,{variant:"ghost",size:"icon",onClick:()=>{confirm("Are you sure you want to deactivate this client?")&&x.mutate(e.id)},children:(0,i.jsx)(N,{className:"w-4 h-4"})})]})})]},e.id)})})]}),(0,i.jsx)(v,{open:e,onOpenChange:n}),s&&(0,i.jsx)(v,{open:!0,onOpenChange:()=>o(null),clientId:s})]})})}},4090:function(e,n,s){"use strict";s.d(n,{Ln:function(){return u},WN:function(){return d},av:function(){return c},eU:function(){return o},m8:function(){return a}});var i=s(8012),t=s(1881),l=s(1510),r=s(4017);function c(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,i.a)({queryKey:["clients",{includeInactive:e}],queryFn:()=>r.x1.get("/api/v1/clients",{includeInactive:e})})}function a(e){return(0,i.a)({queryKey:["clients",e],queryFn:()=>r.x1.get("/api/v1/clients/".concat(e)),enabled:!!e})}function d(){let e=(0,t.NL)();return(0,l.D)({mutationFn:e=>r.x1.post("/api/v1/clients",e),onSuccess:()=>{e.invalidateQueries({queryKey:["clients"]})}})}function o(){let e=(0,t.NL)();return(0,l.D)({mutationFn:e=>{let{id:n,data:s}=e;return r.x1.put("/api/v1/clients/".concat(n),s)},onSuccess:(n,s)=>{e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["clients",s.id]})}})}function u(){let e=(0,t.NL)();return(0,l.D)({mutationFn:e=>r.x1.delete("/api/v1/clients/".concat(e)),onSuccess:()=>{e.invalidateQueries({queryKey:["clients"]})}})}}},function(e){e.O(0,[289,621,465,878,662,416,963,744],function(){return e(e.s=7607)}),_N_E=e.O()}]);