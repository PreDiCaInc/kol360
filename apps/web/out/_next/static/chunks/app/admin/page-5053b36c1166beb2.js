(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{2642:function(e,r,t){Promise.resolve().then(t.bind(t,745))},745:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return v}});var n=t(6517),a=t(8949),s=t(5996),i=t(1737),l=t(6944),o=t(1326),c=t(3933);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,c.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),u=(0,c.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),f=(0,c.Z)("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),h=(0,c.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);function m(){var e;let{user:r,signOut:t}=(0,s.a)(),i=(null==r?void 0:r.role)==="PLATFORM_ADMIN";return(0,n.jsx)("div",{className:"min-h-screen bg-gray-100 p-8",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"KOL360 Admin"}),(0,n.jsx)(l.z,{variant:"outline",onClick:t,children:"Sign Out"})]}),(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsx)(o.ll,{children:"Welcome"}),(0,n.jsx)(o.SZ,{children:"You are signed in"})]}),(0,n.jsx)(o.aY,{children:(0,n.jsxs)("dl",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"font-medium text-gray-500",children:"Email"}),(0,n.jsx)("dd",{children:null==r?void 0:r.email})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"font-medium text-gray-500",children:"Role"}),(0,n.jsx)("dd",{className:"capitalize",children:null==r?void 0:null===(e=r.role)||void 0===e?void 0:e.replace(/_/g," ").toLowerCase()})]}),(null==r?void 0:r.tenantId)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"font-medium text-gray-500",children:"Tenant ID"}),(0,n.jsx)("dd",{children:r.tenantId})]})]})})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsx)(o.ll,{children:"Quick Actions"}),(0,n.jsx)(o.SZ,{children:"Manage your platform"})]}),(0,n.jsxs)(o.aY,{className:"space-y-2",children:[i&&(0,n.jsx)(a.default,{href:"/admin/clients",children:(0,n.jsxs)(l.z,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(d,{className:"w-4 h-4 mr-2"}),"Manage Clients"]})}),(0,n.jsx)(a.default,{href:"/admin/users",children:(0,n.jsxs)(l.z,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(u,{className:"w-4 h-4 mr-2"}),"Manage Users"]})}),(0,n.jsx)(a.default,{href:"/admin/hcps",children:(0,n.jsxs)(l.z,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(f,{className:"w-4 h-4 mr-2"}),"HCP Database"]})}),(0,n.jsxs)(l.z,{variant:"outline",className:"w-full justify-start",disabled:!0,children:[(0,n.jsx)(h,{className:"w-4 h-4 mr-2"}),"View Campaigns (Coming Soon)"]})]})]})]})]})})}function v(){return(0,n.jsx)(i.Y,{children:(0,n.jsx)(m,{})})}},1737:function(e,r,t){"use strict";t.d(r,{Y:function(){return l}});var n=t(6517),a=t(6557),s=t(6815),i=t(5996);function l(e){let{children:r,allowedRoles:t}=e,l=(0,s.useRouter)(),{user:o,isLoading:c,isAuthenticated:d}=(0,i.a)();return((0,a.useEffect)(()=>{c||d||l.push("/login")},[c,d,l]),(0,a.useEffect)(()=>{!c&&d&&t&&o&&!t.includes(o.role)&&l.push("/unauthorized")},[c,d,t,o,l]),c)?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):!d||t&&o&&!t.includes(o.role)?null:(0,n.jsx)(n.Fragment,{children:r})}},6944:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var n=t(6517),a=t(6557),s=t(2320),i=t(7310),l=t(7205);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:t})),ref:r,...d})});c.displayName="Button"},1326:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var n=t(6517),a=t(6557),s=t(7205);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},5996:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return x},a:function(){return y}});var n=t(6517),a=t(6557),s=t(1895),i=t(3665),l=t(1957),o=t(2955),c=t(8934),d=t(8420),u=t(8866),f=t(993),h=t(2671),m=t(8368);s.V.configure({Auth:{Cognito:{userPoolId:"us-east-2_63CJVTAV9",userPoolClientId:"7tqkritsrh3dgmaj6oq8va46vj"}}});let v=(0,a.createContext)(null);function x(e){let{children:r}=e,[t,s]=(0,a.useState)(null),[x,y]=(0,a.useState)(!0);async function p(){try{var e;let r=await (0,i.t)(),t=await (0,l.y)(),n=await (0,o.v)(),a=null===(e=t.tokens)||void 0===e?void 0:e.accessToken,c=null==a?void 0:a.payload["custom:role"];if(!c){let e=null==a?void 0:a.payload["cognito:groups"];(null==e?void 0:e.includes("PLATFORM_ADMIN"))||(null==e?void 0:e.includes("platform-admins"))?c="PLATFORM_ADMIN":(null==e?void 0:e.includes("CLIENT_ADMIN"))||(null==e?void 0:e.includes("client-admins"))?c="CLIENT_ADMIN":((null==e?void 0:e.includes("TEAM_MEMBER"))||null==e||e.includes("team-members"),c="TEAM_MEMBER")}s({sub:r.userId,email:n.email||"",role:c,tenantId:null==a?void 0:a.payload["custom:tenant_id"],firstName:n.given_name,lastName:n.family_name})}catch(e){s(null)}finally{y(!1)}}async function g(e,r){try{await (0,c.z)({username:e,password:r}),await p()}catch(e){throw console.error("Sign in error:",e),e}}async function j(e,r,t,n){try{await (0,d.y)({username:e,password:r,options:{userAttributes:{email:e,given_name:t,family_name:n}}})}catch(e){throw console.error("Sign up error:",e),e}}async function w(e,r){try{await (0,u._)({username:e,confirmationCode:r})}catch(e){throw console.error("Confirm sign up error:",e),e}}async function N(){try{await (0,f.w)(),s(null)}catch(e){throw console.error("Sign out error:",e),e}}async function k(){try{var e,r;let t=await (0,l.y)();return(null===(r=t.tokens)||void 0===r?void 0:null===(e=r.accessToken)||void 0===e?void 0:e.toString())||null}catch(e){return null}}async function b(e){try{await (0,h.c)({username:e})}catch(e){throw console.error("Forgot password error:",e),e}}async function M(e,r,t){try{await (0,m.f)({username:e,confirmationCode:r,newPassword:t})}catch(e){throw console.error("Reset password error:",e),e}}return(0,a.useEffect)(()=>{p()},[]),(0,n.jsx)(v.Provider,{value:{user:t,isLoading:x,isAuthenticated:!!t,signIn:g,signUp:j,confirmSignUp:w,signOut:N,getAccessToken:k,forgotPassword:b,resetPassword:M},children:r})}function y(){let e=(0,a.useContext)(v);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},7205:function(e,r,t){"use strict";t.d(r,{cn:function(){return s}});var n=t(3287),a=t(6759);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}},3933:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(6557);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&t.indexOf(e)===r).join(" ")};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,n.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...f}=e;return(0,n.createElement)("svg",{ref:r,...i,width:a,height:a,stroke:t,strokeWidth:o?24*Number(l)/Number(a):l,className:s("lucide",c),...f},[...u.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),o=(e,r)=>{let t=(0,n.forwardRef)((t,i)=>{let{className:o,...c}=t;return(0,n.createElement)(l,{ref:i,iconNode:r,className:s("lucide-".concat(a(e)),o),...c})});return t.displayName="".concat(e),t}},6815:function(e,r,t){"use strict";var n=t(2346);t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[289,621,949,416,963,744],function(){return e(e.s=2642)}),_N_E=e.O()}]);