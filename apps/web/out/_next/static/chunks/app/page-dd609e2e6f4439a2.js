(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8459:function(n,e,t){Promise.resolve().then(t.bind(t,6339))},6339:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return a}});var r=t(6517),o=t(6557),i=t(6815),u=t(5996);function a(){let n=(0,i.useRouter)(),{isAuthenticated:e,isLoading:t}=(0,u.a)();return(0,o.useEffect)(()=>{t||(e?n.replace("/admin"):n.replace("/login"))},[e,t,n]),(0,r.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"KOL360"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}},5996:function(n,e,t){"use strict";t.d(e,{AuthProvider:function(){return v},a:function(){return h}});var r=t(6517),o=t(6557),i=t(1895),u=t(3665),a=t(1957),l=t(2955),s=t(8934),c=t(8420),d=t(8866),f=t(993);i.V.configure({Auth:{Cognito:{userPoolId:"us-east-2_63CJVTAV9",userPoolClientId:"7tqkritsrh3dgmaj6oq8va46vj"}}});let m=(0,o.createContext)(null);function v(n){let{children:e}=n,[t,i]=(0,o.useState)(null),[v,h]=(0,o.useState)(!0);async function y(){try{var n;let e=await (0,u.t)(),t=await (0,a.y)(),r=await (0,l.v)(),o=null===(n=t.tokens)||void 0===n?void 0:n.accessToken,s=null==o?void 0:o.payload["custom:role"];if(!s){let n=null==o?void 0:o.payload["cognito:groups"];(null==n?void 0:n.includes("PLATFORM_ADMIN"))||(null==n?void 0:n.includes("platform-admins"))?s="PLATFORM_ADMIN":(null==n?void 0:n.includes("CLIENT_ADMIN"))||(null==n?void 0:n.includes("client-admins"))?s="CLIENT_ADMIN":((null==n?void 0:n.includes("TEAM_MEMBER"))||null==n||n.includes("team-members"),s="TEAM_MEMBER")}i({sub:e.userId,email:r.email||"",role:s,tenantId:null==o?void 0:o.payload["custom:tenant_id"],firstName:r.given_name,lastName:r.family_name})}catch(n){i(null)}finally{h(!1)}}async function _(n,e){try{await (0,s.z)({username:n,password:e}),await y()}catch(n){throw console.error("Sign in error:",n),n}}async function w(n,e,t,r){try{await (0,c.y)({username:n,password:e,options:{userAttributes:{email:n,given_name:t,family_name:r}}})}catch(n){throw console.error("Sign up error:",n),n}}async function g(n,e){try{await (0,d._)({username:n,confirmationCode:e})}catch(n){throw console.error("Confirm sign up error:",n),n}}async function p(){try{await (0,f.w)(),i(null)}catch(n){throw console.error("Sign out error:",n),n}}async function A(){try{var n,e;let t=await (0,a.y)();return(null===(e=t.tokens)||void 0===e?void 0:null===(n=e.accessToken)||void 0===n?void 0:n.toString())||null}catch(n){return null}}return(0,o.useEffect)(()=>{y()},[]),(0,r.jsx)(m.Provider,{value:{user:t,isLoading:v,isAuthenticated:!!t,signIn:_,signUp:w,confirmSignUp:g,signOut:p,getAccessToken:A},children:e})}function h(){let n=(0,o.useContext)(m);if(!n)throw Error("useAuth must be used within an AuthProvider");return n}},6815:function(n,e,t){"use strict";var r=t(2346);t.o(r,"useRouter")&&t.d(e,{useRouter:function(){return r.useRouter}})}},function(n){n.O(0,[401,416,963,744],function(){return n(n.s=8459)}),_N_E=n.O()}]);