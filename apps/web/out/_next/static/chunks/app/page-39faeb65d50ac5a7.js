(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8459:function(e,n,t){Promise.resolve().then(t.bind(t,6339))},6339:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return a}});var r=t(6517),o=t(6557),u=t(6815),i=t(5996);function a(){let e=(0,u.useRouter)(),{isAuthenticated:n,isLoading:t}=(0,i.a)();return(0,o.useEffect)(()=>{t||(n?e.replace("/admin"):e.replace("/login"))},[n,t,e]),(0,r.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"KOL360"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}},5996:function(e,n,t){"use strict";t.d(n,{AuthProvider:function(){return h},a:function(){return v}});var r=t(6517),o=t(6557),u=t(1895),i=t(3665),a=t(1957),l=t(2955),s=t(8934),c=t(8420),d=t(8866),f=t(993);u.V.configure({Auth:{Cognito:{userPoolId:"us-east-1_cUbOzq2mz",userPoolClientId:"27cef9uaa8dp3uee7on86rbmp"}}});let m=(0,o.createContext)(null);function h(e){let{children:n}=e,[t,u]=(0,o.useState)(null),[h,v]=(0,o.useState)(!0);async function y(){try{var e;let n=await (0,i.t)(),t=await (0,a.y)(),r=await (0,l.v)(),o=null===(e=t.tokens)||void 0===e?void 0:e.accessToken,s=null==o?void 0:o.payload["custom:role"];if(!s){let e=null==o?void 0:o.payload["cognito:groups"];(null==e?void 0:e.includes("PLATFORM_ADMIN"))||(null==e?void 0:e.includes("platform-admins"))?s="PLATFORM_ADMIN":(null==e?void 0:e.includes("CLIENT_ADMIN"))||(null==e?void 0:e.includes("client-admins"))?s="CLIENT_ADMIN":((null==e?void 0:e.includes("TEAM_MEMBER"))||null==e||e.includes("team-members"),s="TEAM_MEMBER")}u({sub:n.userId,email:r.email||"",role:s,tenantId:null==o?void 0:o.payload["custom:tenant_id"],firstName:r.given_name,lastName:r.family_name})}catch(e){u(null)}finally{v(!1)}}async function _(e,n){try{await (0,s.z)({username:e,password:n}),await y()}catch(e){throw console.error("Sign in error:",e),e}}async function w(e,n,t,r){try{await (0,c.y)({username:e,password:n,options:{userAttributes:{email:e,given_name:t,family_name:r}}})}catch(e){throw console.error("Sign up error:",e),e}}async function p(e,n){try{await (0,d._)({username:e,confirmationCode:n})}catch(e){throw console.error("Confirm sign up error:",e),e}}async function g(){try{await (0,f.w)(),u(null)}catch(e){throw console.error("Sign out error:",e),e}}async function A(){try{var e,n;let t=await (0,a.y)();return(null===(n=t.tokens)||void 0===n?void 0:null===(e=n.accessToken)||void 0===e?void 0:e.toString())||null}catch(e){return null}}return(0,o.useEffect)(()=>{y()},[]),(0,r.jsx)(m.Provider,{value:{user:t,isLoading:h,isAuthenticated:!!t,signIn:_,signUp:w,confirmSignUp:p,signOut:g,getAccessToken:A},children:n})}function v(){let e=(0,o.useContext)(m);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},6815:function(e,n,t){"use strict";var r=t(2346);t.o(r,"useRouter")&&t.d(n,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[401,416,963,744],function(){return e(e.s=8459)}),_N_E=e.O()}]);