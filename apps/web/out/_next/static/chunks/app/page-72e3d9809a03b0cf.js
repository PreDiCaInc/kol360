(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8459:function(n,e,t){Promise.resolve().then(t.bind(t,6339))},6339:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return u}});var r=t(6517),o=t(6557),i=t(6815),a=t(5996);function u(){let n=(0,i.useRouter)(),{isAuthenticated:e,isLoading:t}=(0,a.a)();return(0,o.useEffect)(()=>{t||(e?n.replace("/admin"):n.replace("/login"))},[e,t,n]),(0,r.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"KOL360"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}},5996:function(n,e,t){"use strict";t.d(e,{AuthProvider:function(){return y},a:function(){return w}});var r=t(6517),o=t(6557),i=t(1895),a=t(3665),u=t(1957),s=t(2955),c=t(8934),l=t(8420),d=t(8866),f=t(993),m=t(2671),h=t(8368);i.V.configure({Auth:{Cognito:{userPoolId:"us-east-2_63CJVTAV9",userPoolClientId:"7tqkritsrh3dgmaj6oq8va46vj"}}});let v=(0,o.createContext)(null);function y(n){let{children:e}=n,[t,i]=(0,o.useState)(null),[y,w]=(0,o.useState)(!0);async function _(){try{var n;let e=await (0,a.t)(),t=await (0,u.y)(),r=await (0,s.v)(),o=null===(n=t.tokens)||void 0===n?void 0:n.accessToken,c=null==o?void 0:o.payload["custom:role"];if(!c){let n=null==o?void 0:o.payload["cognito:groups"];(null==n?void 0:n.includes("PLATFORM_ADMIN"))||(null==n?void 0:n.includes("platform-admins"))?c="PLATFORM_ADMIN":(null==n?void 0:n.includes("CLIENT_ADMIN"))||(null==n?void 0:n.includes("client-admins"))?c="CLIENT_ADMIN":((null==n?void 0:n.includes("TEAM_MEMBER"))||null==n||n.includes("team-members"),c="TEAM_MEMBER")}i({sub:e.userId,email:r.email||"",role:c,tenantId:null==o?void 0:o.payload["custom:tenant_id"],firstName:r.given_name,lastName:r.family_name})}catch(n){i(null)}finally{w(!1)}}async function p(n,e){try{await (0,c.z)({username:n,password:e}),await _()}catch(n){throw console.error("Sign in error:",n),n}}async function g(n,e,t,r){try{await (0,l.y)({username:n,password:e,options:{userAttributes:{email:n,given_name:t,family_name:r}}})}catch(n){throw console.error("Sign up error:",n),n}}async function A(n,e){try{await (0,d._)({username:n,confirmationCode:e})}catch(n){throw console.error("Confirm sign up error:",n),n}}async function E(){try{await (0,f.w)(),i(null)}catch(n){throw console.error("Sign out error:",n),n}}async function N(){try{var n,e;let t=await (0,u.y)();return(null===(e=t.tokens)||void 0===e?void 0:null===(n=e.accessToken)||void 0===n?void 0:n.toString())||null}catch(n){return null}}async function C(n){try{await (0,m.c)({username:n})}catch(n){throw console.error("Forgot password error:",n),n}}async function M(n,e,t){try{await (0,h.f)({username:n,confirmationCode:e,newPassword:t})}catch(n){throw console.error("Reset password error:",n),n}}return(0,o.useEffect)(()=>{_()},[]),(0,r.jsx)(v.Provider,{value:{user:t,isLoading:y,isAuthenticated:!!t,signIn:p,signUp:g,confirmSignUp:A,signOut:E,getAccessToken:N,forgotPassword:C,resetPassword:M},children:e})}function w(){let n=(0,o.useContext)(v);if(!n)throw Error("useAuth must be used within an AuthProvider");return n}},6815:function(n,e,t){"use strict";var r=t(2346);t.o(r,"useRouter")&&t.d(e,{useRouter:function(){return r.useRouter}})}},function(n){n.O(0,[289,416,963,744],function(){return n(n.s=8459)}),_N_E=n.O()}]);